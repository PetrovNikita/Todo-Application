(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{20:function(e,t,n){e.exports=n(39)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchItemsRequest",(function(){return _})),n.d(a,"fetchItemsSuccess",(function(){return N})),n.d(a,"fetchItemsFailure",(function(){return L})),n.d(a,"fetchItems",(function(){return R})),n.d(a,"deleteItem",(function(){return A})),n.d(a,"addItem",(function(){return D})),n.d(a,"setFilter",(function(){return F})),n.d(a,"setSearch",(function(){return w})),n.d(a,"toggleDone",(function(){return M})),n.d(a,"toggleImportant",(function(){return k})),n.d(a,"changeLabel",(function(){return H}));var r=n(0),o=n.n(r),c=n(10),l=n.n(c),u=n(8),i=n(1),s=n(2),m=n(5),f=n(4),d=n(3),E=n(7),p=n(19),b=n(11),h=n(6);function g(e,t){var n=e.items,a=void 0===n?[]:n;switch(t.type){case"FETCH_ITEMS_REQUEST":return[];case"FETCH_ITEMS_SUCCESS":return t.payload;case"FETCH_ITEMS_FAILURE":return[];case"DELETE_ITEM":return function(e,t){var n=Object(h.a)(e),a=n.findIndex((function(e){return e.id===t}));return n.splice(a,1),n}(a,t.payload);case"ADD_ITEM":return[].concat(Object(h.a)(a),[t.payload]);case"CHANGE_LABEL":var r=t.payload;return function(e,t,n){var a=e.findIndex((function(e){return e.id===t})),r=Object(u.a)({},e[a],{label:n});return[].concat(Object(h.a)(e.slice(0,a)),[r],Object(h.a)(e.slice(a+1)))}(a,r.id,r.newLabel);case"TOGGLE_DONE":return v(a,t.payload,"done");case"TOGGLE_IMPORTANT":return v(a,t.payload,"important");default:return a}}function v(e,t,n){var a=e.findIndex((function(e){return e.id===t})),r=!e[a][n],o=Object(u.a)({},e[a],Object(b.a)({},n,r));return[].concat(Object(h.a)(e.slice(0,a)),[o],Object(h.a)(e.slice(a+1)))}function y(e,t){var n=e.filter,a=void 0===n?"all":n;switch(t.type){case"SET_FILTER":return t.payload;default:return a}}function I(e,t){var n=e.search,a=void 0===n?"":n;switch(t.type){case"SET_SEARCH":return t.payload;default:return a}}function S(e,t){var n=e.loading,a=void 0!==n&&n;switch(t.type){case"FETCH_ITEMS_REQUEST":return!0;case"FETCH_ITEMS_SUCCESS":case"FETCH_ITEMS_FAILURE":return!1;default:return a}}function O(e,t){var n=e.hasError,a=void 0!==n&&n;switch(t.type){case"FETCH_ITEMS_REQUEST":case"FETCH_ITEMS_SUCCESS":return!1;case"FETCH_ITEMS_FAILURE":return!0;default:return a}}var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return console.log(t.type),{items:g(e,t),filter:y(e,t),search:I(e,t),loading:S(e,t),hasError:O(e,t)}},C=Object(d.d)(T,Object(d.a)(p.a)),j=(n(31),function(e){var t=e.toDo,n=e.done;return o.a.createElement("div",{className:"app-header d-flex"},o.a.createElement("h1",null,"Todo List"),o.a.createElement("h2",null,t," more to do, ",n," done"))}),_=function(){return{type:"FETCH_ITEMS_REQUEST"}},N=function(e){return{type:"FETCH_ITEMS_SUCCESS",payload:e}},L=function(){return{type:"FETCH_ITEMS_FAILURE"}},A=function(e){return{type:"DELETE_ITEM",payload:e}},D=function(e){return{type:"ADD_ITEM",payload:e}},F=function(e){return{type:"SET_FILTER",payload:e}},w=function(e){return{type:"SET_SEARCH",payload:e}},M=function(e){return{type:"TOGGLE_DONE",payload:e}},k=function(e){return{type:"TOGGLE_IMPORTANT",payload:e}},H=function(e,t){return{type:"CHANGE_LABEL",payload:{id:e,newLabel:t}}},R=function(e){return function(){return function(t){t(_()),e.getItems().then((function(e){return t(N(e))})).catch((function(){return t(L())}))}}},x=n(13),U=function(e){var t=e.important,n=e.done,a=e.label,r=e.toggleImportant,c=e.onDelete,l=e.toggleDone,u=e.changeItem,i="todo-list-item";return t&&(i+=" important"),n&&(i+=" done"),o.a.createElement("span",{className:i},o.a.createElement("span",{className:"todo-list-item-label",onClick:l},a),o.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-sm float-right",onClick:r},o.a.createElement("i",{className:"fa fa-exclamation"})),o.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm float-right",onClick:c},o.a.createElement("i",{className:"fa fa-trash-o"})),o.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-sm float-right",onClick:u},o.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"})))},G=function(e){var t=e.id,n=e.label,a=e.changeLabel,c=e.changeItem,l=Object(r.useState)(n),u=Object(x.a)(l,2),i=u[0],s=u[1],m=Object(r.useRef)(null);Object(r.useEffect)((function(){m.current.focus(),m.current.select()}),[]);return o.a.createElement("form",{className:"bottom-panel d-flex label-change-form",onSubmit:function(e){e.preventDefault(),a(t,i),c()}},o.a.createElement("input",{value:i,ref:m,className:"form-control label-change-input",onChange:function(e){var t=e.target.value;s(t)}}),o.a.createElement("button",{type:"submit",className:"btn btn-outline-secondary label-change-submit"},"Save"))},J=(n(32),function(e){var t=Object(r.useState)(!1),n=Object(x.a)(t,2),a=n[0],c=n[1],l=function(){console.log("change label"),c((function(e){return!e}))};return a?o.a.createElement(G,Object.assign({},e,{changeItem:l})):o.a.createElement(U,Object.assign({},e,{changeItem:l}))}),P=(n(33),Object(E.b)((function(e){return{items:e.items,filter:e.filter,search:e.search}}),(function(e){return Object(d.b)({toggleDone:M,toggleImportant:k,onDelete:A,changeLabel:H},e)}))((function(e){var t=e.items,n=e.filter,a=e.search,r=e.toggleImportant,c=e.toggleDone,l=e.onDelete,u=e.changeLabel,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return 0===t.length?e:e.filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1}))}(function(e,t){return"all"===t?e:"active"===t?e.filter((function(e){return!e.done})):"done"===t?e.filter((function(e){return e.done})):void 0}(t,n),a);if(0===i.length)switch(n){case"all":return o.a.createElement("div",null,"You have not todos.");case"active":return o.a.createElement("div",null,"You have not active todos.");case"done":return o.a.createElement("div",null,"You have not done todos.");default:return o.a.createElement("div",null,"You have not todos.")}var s=i.map((function(e){var t=e.id;return o.a.createElement("li",{key:t,className:"list-group-item"},o.a.createElement(J,Object.assign({},e,{toggleImportant:function(){return r(t)},onDelete:function(){return l(t)},toggleDone:function(){return c(t)},changeLabel:u})))}));return o.a.createElement("ul",{className:"todo-list list-group"},s)}))),Q=(n(34),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={term:""},e.onTermChange=function(t){var n=e.props.onSearchChange,a=void 0===n?function(){}:n;e.setState({term:t.target.value}),a(t.target.value)},e}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("input",{type:"text",className:"form-control search-input",placeholder:"type to search",value:this.state.term,onChange:this.onTermChange})}}]),n}(r.Component)),Y=[{name:"all",label:"All"},{name:"active",label:"Active"},{name:"done",label:"Done"}],B=function(e){var t=e.filter,n=e.onFilterChange,a=Y.map((function(e){var a=e.name,r=e.label,c="btn "+(a===t?"btn-info":"btn-outline-secondary");return o.a.createElement("button",{key:a,type:"button",onClick:function(){return n(a)},className:c},r)}));return o.a.createElement("div",{className:"btn-group"},a)},q=o.a.createContext(),W=q.Provider,z=q.Consumer,K=function(e){return function(t){return o.a.createElement(z,null,(function(n){return o.a.createElement(e,Object.assign({},t,{service:n}))}))}},V=(n(35),K(function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={label:""},e.onLabelChange=function(t){e.setState({label:t.target.value})},e.onSubmit=function(t){t.preventDefault();var n=e.state.label;e.setState({label:""}),e.props.onItemAdded(n)},e}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("form",{className:"bottom-panel d-flex",onSubmit:this.onSubmit},o.a.createElement("input",{type:"text",className:"form-control new-todo-label",value:this.state.label,onChange:this.onLabelChange,placeholder:"What needs to be done?"}),o.a.createElement("button",{type:"submit",className:"btn btn-outline-secondary"},"Add"))}}]),n}(r.Component))),X=(n(36),function(){return o.a.createElement("div",null,"Loading ...")}),Z=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"alert alert-danger"},"Something went wrong."),o.a.createElement("button",{className:"btn"},o.a.createElement("a",{href:"\\"},"To home page")))},$=(n(37),function(){return o.a.createElement("div",{className:"footer"},"All right reserved.")}),ee=(n(38),function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onItemAdded=function(t){var n=e.createItem(t);e.props.addItem(n)},e}return Object(s.a)(n,[{key:"createItem",value:function(e){return{id:(new Date).toISOString(),label:e,important:!1,done:!1}}},{key:"componentDidMount",value:function(){this.props.fetchItems()}},{key:"componentDidUpdate",value:function(e){var t=e.items;console.log(t),(this.props.items.length>0||t.length>0)&&this.props.service.postItems(C.getState().items)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.filter,a=e.loading,r=e.hasError,c=e.setFilter,l=e.setSearch,u=t.filter((function(e){return e.done})).length,i=t.length-u;return a?o.a.createElement(X,null):r?o.a.createElement(Z,null):o.a.createElement("div",{className:"todo-app"},o.a.createElement(j,{toDo:i,done:u}),o.a.createElement("div",{className:"search-panel d-flex"},o.a.createElement(Q,{onSearchChange:l}),o.a.createElement(B,{filter:n,onFilterChange:c})),o.a.createElement(P,null),o.a.createElement(V,{onItemAdded:this.onItemAdded}),o.a.createElement($,null))}}]),n}(r.Component)),te=Object(d.c)(K,Object(E.b)((function(e){return e}),(function(e,t){var n=t.service;return Object(u.a)({},Object(d.b)(Object(u.a)({},a,{fetchItems:R(n)}),e))})))(ee),ne=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("".concat(e," happend. Info: ").concat(t)),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?o.a.createElement(Z,null):this.props.children}}]),n}(r.Component),ae=new(function(){function e(){var t=this;Object(i.a)(this,e),this._createItem=function(e){return{id:t.maxId++,label:e,important:!1,done:!1}},this._id=10,localStorage.getItem("todos")||localStorage.setItem("todos",JSON.stringify([]))}return Object(s.a)(e,[{key:"getItems",value:function(){return new Promise((function(e,t){setTimeout((function(){Math.random()>1?t(new Error("Error on server")):(console.log(JSON.parse(localStorage.getItem("todos"))),e(JSON.parse(localStorage.getItem("todos"))))}),700)}))}},{key:"postItems",value:function(e){console.log("Items saved.",e),localStorage.setItem("todos",JSON.stringify(e))}}]),e}());l.a.render(o.a.createElement(E.a,{store:C},o.a.createElement(ne,null,o.a.createElement(W,{value:ae},o.a.createElement(te,null)))),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.1b212538.chunk.js.map