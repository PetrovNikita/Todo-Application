{"version":3,"sources":["reducers/items-reducer.js","reducers/filter-reducer.js","reducers/search-reducer.js","reducers/loading-reducer.js","reducers/has-error-reducer.js","reducers/reducer.js","reducers/index.js","store.js","components/app-header/index.js","components/app-header/app-header.js","actions/index.js","components/todo-list-item/static-label-item.tsx","components/todo-list-item/changing-label-item.tsx","components/todo-list-item/todo-list-item.tsx","components/todo-list/index.js","components/todo-list/todo-list.js","components/search-panel/index.js","components/search-panel/search-panel.js","components/item-status-filter/item-status-filter.js","components/item-status-filter/index.js","components/service-context/service-context.js","components/hoc/with-service/index.js","components/hoc/with-service/with-service.js","components/item-add-form/index.js","components/item-add-form/item-add-form.js","components/loading-indicator/index.js","components/loading-indicator/loading-indicator.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/footer/footer.tsx","components/app/app.js","components/app/index.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/index.js","services/mock-service.js","index.js"],"names":["itemsReducer","action","items","type","payload","arr","id","newArr","idx","findIndex","item","splice","onDelete","newLabel","label","slice","changeLabel","toggleProperty","propName","value","filterReducer","filter","searchReducer","search","loadingReducer","loading","hasErrorReducer","hasError","reducer","state","console","log","store","createStore","applyMiddleware","thunk","AppHeader","toDo","done","className","fetchItemsRequest","fetchItemsSuccess","fetchItemsFailure","deleteItem","addItem","setFilter","setSearch","toggleDone","toggleImportant","fetchItems","service","dispatch","getItems","then","catch","StaticLabelItem","important","changeItem","classNames","onClick","aria-hidden","ChangingLabelItem","useState","labelValue","setLabelValue","inputElem","useRef","useEffect","current","focus","select","onSubmit","event","preventDefault","ref","onChange","target","TodoListItem","props","changingLabel","setChangingLabel","oldValue","TodoList","connect","bindActionCreators","actions","visibleItems","length","toLowerCase","indexOf","searchItems","filterItems","elements","map","key","SearchPanel","term","onTermChange","e","onSearchChange","setState","placeholder","this","Component","filterButtons","name","ItemStatusFilter","onFilterChange","buttons","React","createContext","ServiceProvider","Provider","ServiceConsumer","Consumer","WithService","Wrapped","ItemAddForm","onLabelChange","onItemAdded","LoadingIndicator","ErrorIndicator","Fragment","href","Footer","App","createItem","Date","toISOString","prevItems","postItems","getState","doneCount","toDoCount","compose","ErrorBoundry","error","info","children","mockService","_createItem","maxId","_id","localStorage","getItem","setItem","JSON","stringify","Promise","res","rej","setTimeout","Math","random","Error","parse","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1b212538.chunk.js","sourcesContent":["export default function itemsReducer ({items=[]}, action) {\r\n    switch (action.type) {\r\n\r\n        case \"FETCH_ITEMS_REQUEST\": {\r\n            return [];\r\n        }\r\n\r\n        case \"FETCH_ITEMS_SUCCESS\": {\r\n            return action.payload;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_FAILURE\": {\r\n            return [];\r\n        }\r\n\r\n        case \"DELETE_ITEM\": {\r\n            return onDelete(items, action.payload);\r\n        }\r\n\r\n        case \"ADD_ITEM\": {\r\n            return [...items, action.payload];\r\n        }\r\n\r\n        case \"CHANGE_LABEL\": {\r\n            const {id, newLabel} = action.payload;\r\n            return changeLabel(items, id, newLabel);\r\n        }\r\n\r\n        case \"TOGGLE_DONE\": {\r\n            return toggleProperty(items, action.payload, 'done');\r\n        }\r\n\r\n        case \"TOGGLE_IMPORTANT\": {\r\n            return toggleProperty(items, action.payload, 'important');\r\n        }\r\n\r\n        default: {\r\n            return items;\r\n        }\r\n    }\r\n}\r\n\r\nfunction toggleProperty (arr, id, propName) {\r\n    const idx = arr.findIndex((item) => item.id === id);\r\n    const oldItem = arr[idx];\r\n    const value = !oldItem[propName];\r\n    //копируем элементы, чтоб не мутировать состояние\r\n    const item = { ...arr[idx], [propName]: value } ;\r\n    //slice, чтоб не мутировать состояние\r\n    return [\r\n      ...arr.slice(0, idx),\r\n      item,\r\n      ...arr.slice(idx + 1)\r\n    ];\r\n};\r\n\r\nfunction changeLabel(arr, id, newLabel) {\r\n    const idx = arr.findIndex((item) => item.id === id);\r\n    //копируем элементы, чтоб не мутировать состояние\r\n    const item = { ...arr[idx], label: newLabel } ;\r\n    //slice, чтоб не мутировать состояние\r\n    return [\r\n      ...arr.slice(0, idx),\r\n      item,\r\n      ...arr.slice(idx + 1)\r\n    ];\r\n}\r\n\r\nfunction onDelete (arr, id) {\r\n    //копируем элементы, чтоб не мутировать состояние\r\n    const newArr = [...arr];\r\n    const idx = newArr.findIndex((item) => item.id === id);\r\n    newArr.splice(idx, 1);\r\n    return newArr;\r\n};","export default function filterReducer ({filter='all'}, action) {\r\n    switch (action.type) {\r\n        case \"SET_FILTER\": {\r\n            return action.payload;\r\n        }\r\n\r\n        default: {\r\n            return filter;\r\n        }\r\n    }\r\n}","export default function searchReducer ({search = ''}, action) {\r\n    switch (action.type) {\r\n        case \"SET_SEARCH\": {\r\n            return action.payload;\r\n        }\r\n\r\n        default: {\r\n            return search;\r\n        }\r\n    }\r\n};","export default function loadingReducer ({loading = false}, action) {\r\n    switch (action.type) {\r\n        case \"FETCH_ITEMS_REQUEST\": {\r\n            return true;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_SUCCESS\": {\r\n            return false;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_FAILURE\": {\r\n            return false;\r\n        }\r\n\r\n\r\n        default: {\r\n            return loading;\r\n        }\r\n    }\r\n}","export default function hasErrorReducer ({hasError = false}, action) {\r\n    switch (action.type) {\r\n        case \"FETCH_ITEMS_REQUEST\": {\r\n            return false;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_SUCCESS\": {\r\n            return false;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_FAILURE\": {\r\n            return true;\r\n        }\r\n\r\n\r\n        default: {\r\n            return hasError;\r\n        }\r\n    }\r\n}","import itemsReducer from \"./items-reducer.js\";\r\nimport filterReducer from \"./filter-reducer.js\";\r\nimport searchReducer from \"./search-reducer.js\";\r\nimport loadingReducer from \"./loading-reducer.js\";\r\nimport hasErrorReducer from \"./has-error-reducer.js\";\r\n\r\nconst reducer = (state = {}, action) => {\r\n    console.log(action.type);\r\n    return {\r\n        items: itemsReducer(state, action),\r\n        filter: filterReducer(state, action),\r\n        search: searchReducer(state, action),\r\n        loading: loadingReducer(state, action),\r\n        hasError: hasErrorReducer(state, action)\r\n    }\r\n};\r\n\r\n\r\nexport default reducer;","import reducer from \"./reducer.js\";\r\n\r\nexport default reducer;","import {createStore, applyMiddleware} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./reducers\";\r\n\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk));\r\n\r\nexport default store;","import AppHeader from './app-header';\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\nimport './app-header.css';\r\n\r\nconst AppHeader = ({toDo, done}) => {\r\n  return (\r\n    <div className=\"app-header d-flex\">\r\n      <h1>Todo List</h1>\r\n      <h2>{toDo} more to do, {done} done</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppHeader;\r\n","const fetchItemsRequest = () => ({ type: \"FETCH_ITEMS_REQUEST\"});\r\n\r\nconst fetchItemsSuccess = (items) => ({ type: \"FETCH_ITEMS_SUCCESS\", payload: items});\r\n\r\nconst fetchItemsFailure = () => ({ type: \"FETCH_ITEMS_FAILURE\"});\r\n\r\nconst deleteItem = (id) => ({ type: \"DELETE_ITEM\", payload: id});\r\n\r\nconst addItem = (item) => ({ type: \"ADD_ITEM\", payload: item});\r\n\r\nconst setFilter = (filter) => ({ type: \"SET_FILTER\", payload: filter });\r\n\r\nconst setSearch = (search) => ({ type: \"SET_SEARCH\", payload: search });\r\n\r\nconst toggleDone = (id) => ({ type: \"TOGGLE_DONE\", payload: id });\r\n\r\nconst toggleImportant = (id) => ({ type: \"TOGGLE_IMPORTANT\", payload: id});\r\n\r\nconst changeLabel = (id, newLabel) => ({type: \"CHANGE_LABEL\", payload: {id: id, newLabel: newLabel} });\r\n\r\nconst fetchItems = (service) => () => (dispatch) => {\r\n    dispatch( fetchItemsRequest() );\r\n    service.getItems()\r\n        .then((items) => dispatch( fetchItemsSuccess(items) ))\r\n        .catch(() => dispatch(fetchItemsFailure() ))\r\n};\r\n\r\nexport {\r\n    fetchItemsRequest, fetchItemsSuccess, fetchItemsFailure, fetchItems, deleteItem, addItem,\r\n    setFilter, setSearch, toggleDone, toggleImportant, changeLabel\r\n};","import React from \"react\";\r\nimport { ITodoListItemChanging } from '../../interfaces/interfaces';\r\n\r\nconst StaticLabelItem: React.FC<ITodoListItemChanging> = ({ important, done,\r\n    label, toggleImportant, onDelete, toggleDone, changeItem }) => {\r\n\r\n    let classNames = 'todo-list-item';\r\n    if (important) {\r\n      classNames += ' important';\r\n    }\r\n  \r\n    if (done) {\r\n      classNames += ' done';\r\n    }\r\n\r\n    return (\r\n        <span className={classNames}>\r\n            <span\r\n                className=\"todo-list-item-label\"\r\n                onClick={toggleDone}>{label}</span>\r\n\r\n            <button type=\"button\"\r\n                    className=\"btn btn-outline-success btn-sm float-right\"\r\n                    onClick={toggleImportant}>\r\n                <i className=\"fa fa-exclamation\"></i>\r\n            </button>\r\n\r\n            <button type=\"button\"\r\n                    className=\"btn btn-outline-danger btn-sm float-right\"\r\n                    onClick={onDelete}>\r\n                <i className=\"fa fa-trash-o\"></i>\r\n            </button>\r\n\r\n            <button type=\"button\"\r\n                    className=\"btn btn-outline-primary btn-sm float-right\"\r\n                    onClick={changeItem}>\r\n                <i className=\"fa fa-pencil\" aria-hidden=\"true\"></i>\r\n            </button>\r\n        </span>\r\n    )\r\n};\r\n\r\n\r\nexport default StaticLabelItem;","import React, {useState, useEffect, useRef} from \"react\";\r\nimport { ITodoListItemChanging } from '../../interfaces/interfaces';\r\n\r\nconst ChangingLabelItem:React.FC<ITodoListItemChanging> = ({id, label, changeLabel, changeItem}) => {\r\n\r\n    let [labelValue, setLabelValue] = useState<string>(label);\r\n    const inputElem = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        inputElem.current!.focus();\r\n        inputElem.current!.select();\r\n    }, []);\r\n\r\n    const onLabelChange = (event:React.ChangeEvent<HTMLInputElement>) => {\r\n        let newLabel = event.target.value;\r\n        setLabelValue(newLabel);\r\n    };\r\n\r\n    const onSubmit = (event:React.FormEvent) => {\r\n        event.preventDefault();\r\n        changeLabel(id, labelValue);\r\n        changeItem();\r\n    } \r\n\r\n    return (\r\n        <form className=\"bottom-panel d-flex label-change-form\"\r\n                onSubmit={onSubmit}>\r\n            <input value={labelValue} ref={inputElem}\r\n                    className=\"form-control label-change-input\"\r\n                    onChange={onLabelChange}/>\r\n            <button type=\"submit\"\r\n                        className=\"btn btn-outline-secondary label-change-submit\">Save</button>\r\n        </form>\r\n    );\r\n\r\n};\r\n\r\nexport default ChangingLabelItem;","import React, { useState } from 'react';\r\nimport StaticItem from \"./static-label-item\";\r\nimport ChangingLabelItem from \"./changing-label-item\";\r\nimport { ITodoListItem } from '../../interfaces/interfaces';\r\n\r\nimport './todo-list-item.css';\r\n\r\nconst TodoListItem: React.FC<ITodoListItem> = (props) => {\r\n\r\n  let [changingLabel, setChangingLabel] = useState<boolean>(false);\r\n  \r\n\r\n  const changeItem: VoidFunction = () => {\r\n    console.log(\"change label\");\r\n    setChangingLabel((oldValue) => !oldValue );\r\n  };\r\n\r\n\r\n  let todoItem = changingLabel ? <ChangingLabelItem {...props} changeItem={changeItem}/> : <StaticItem {...props} changeItem={changeItem}/>;\r\n\r\n  return todoItem;\r\n};\r\n\r\nexport default TodoListItem;\r\n","import TodoList from './todo-list';\r\n\r\nexport default TodoList;\r\n","import React from 'react';\r\nimport {bindActionCreators} from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from '../../actions';\r\n\r\nimport TodoListItem from '../todo-list-item/todo-list-item';\r\n\r\nimport './todo-list.css';\r\n\r\nconst TodoList = ({ items, filter, search, toggleImportant, toggleDone, onDelete, changeLabel }) => {\r\n\r\n  const filterItems = (items, filter) => {\r\n    if (filter === 'all') {\r\n      return items;\r\n    } else if (filter === 'active') {\r\n      return items.filter((item) => (!item.done));\r\n    } else if (filter === 'done') {\r\n      return items.filter((item) => item.done);\r\n    }\r\n  };\r\n\r\n  const searchItems = (items, search='') => {\r\n    if (search.length === 0) {\r\n      return items;\r\n    }\r\n\r\n    return items.filter((item) => {\r\n      return item.label.toLowerCase().indexOf(search.toLowerCase()) > -1;\r\n    });\r\n  };\r\n\r\n  const visibleItems = searchItems(filterItems(items, filter), search); \r\n  if (visibleItems.length===0) {\r\n    switch (filter) {\r\n      case \"all\": {return <div>You have not todos.</div>}\r\n      case \"active\": {return <div>You have not active todos.</div>}\r\n      case \"done\": {return <div>You have not done todos.</div>}\r\n      default: {return <div>You have not todos.</div>}\r\n    }\r\n  }\r\n\r\n\r\n  const elements = visibleItems.map((item) => {\r\n    const {id} = item;\r\n    return (\r\n      <li key={id} className=\"list-group-item\">\r\n        <TodoListItem\r\n          { ...item }\r\n          toggleImportant={ () => toggleImportant(id) }\r\n          onDelete={ () => onDelete(id) } \r\n          toggleDone = {() => toggleDone(id)} \r\n          changeLabel = {changeLabel} />\r\n      </li>\r\n    );\r\n  });\r\n\r\n  return (<ul className=\"todo-list list-group\">{ elements }</ul>);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => bindActionCreators({\r\n    toggleDone: actions.toggleDone,\r\n    toggleImportant: actions.toggleImportant,\r\n    onDelete: actions.deleteItem,\r\n    changeLabel: actions.changeLabel\r\n  }, dispatch);\r\n\r\nexport default connect(({items, filter, search}) => ({items, filter, search}), mapDispatchToProps)(TodoList);\r\n","import SearchPanel from './search-panel';\r\n\r\nexport default SearchPanel;\r\n","import React, { Component } from 'react';\r\n\r\nimport './search-panel.css';\r\n\r\nexport default class SearchPanel extends Component {\r\n\r\n  state = {\r\n    term: ''\r\n  };\r\n\r\n  onTermChange = (e) => {\r\n    const {onSearchChange = () => {}} = this.props;\r\n    this.setState({\r\n      term: e.target.value\r\n    });\r\n\r\n    onSearchChange(e.target.value);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <input type=\"text\"\r\n             className=\"form-control search-input\"\r\n             placeholder=\"type to search\"\r\n             value={this.state.term}\r\n             onChange={ this.onTermChange } />\r\n    );\r\n  };\r\n}\r\n","import React from 'react';\r\n\r\nconst filterButtons = [\r\n  { name: 'all', label: 'All' },\r\n  { name: 'active', label: 'Active' },\r\n  { name: 'done', label: 'Done' }\r\n];\r\n\r\nconst ItemStatusFilter = ({filter, onFilterChange}) => {\r\n\r\n  const buttons = filterButtons.map(({name, label}) => {\r\n    const isActive = name === filter;\r\n    const classNames = 'btn ' + (isActive ? 'btn-info' : 'btn-outline-secondary');\r\n\r\n    return (\r\n      <button key={name}\r\n              type=\"button\"\r\n              onClick={() => onFilterChange(name)}\r\n              className={classNames}>{label}</button>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"btn-group\">\r\n      { buttons }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStatusFilter;\r\n","import ItemStatusFilter from './item-status-filter';\r\n\r\nexport default ItemStatusFilter;\r\n","import React from \"react\";\r\n\r\nconst {\r\n    Provider : ServiceProvider,\r\n    Consumer : ServiceConsumer\r\n  } = React.createContext();\r\n\r\nexport {\r\n    ServiceProvider,\r\n    ServiceConsumer\r\n}; ","import WithService from './with-service.js';\r\n\r\nexport default WithService;","import React from 'react';\r\nimport {ServiceConsumer} from '../../service-context';\r\n\r\nconst WithService = (Wrapped) => {\r\n\r\n    return (props) => {\r\n        return (<ServiceConsumer>\r\n            {\r\n                (service) => { return (<Wrapped {...props} service={service} />);}\r\n            }\r\n        </ServiceConsumer>);\r\n    }\r\n};\r\n\r\nexport default WithService;","import ItemAddForm from './item-add-form';\r\n\r\nexport default ItemAddForm;\r\n","import React, { Component } from 'react';\r\nimport WithService from '../hoc/with-service';\r\n\r\nimport './item-add-form.css';\r\n\r\nclass ItemAddForm extends Component {\r\n\r\n  state = {\r\n    label: ''\r\n  };\r\n\r\n  onLabelChange = (e) => {\r\n    this.setState({\r\n      label: e.target.value\r\n    })\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { label } = this.state;\r\n    this.setState({ label: '' });\r\n    \r\n    this.props.onItemAdded(label);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"bottom-panel d-flex\"\r\n        onSubmit={this.onSubmit}>\r\n\r\n        <input type=\"text\"\r\n               className=\"form-control new-todo-label\"\r\n               value={this.state.label}\r\n               onChange={this.onLabelChange}\r\n               placeholder=\"What needs to be done?\" />\r\n        <button type=\"submit\"\r\n                className=\"btn btn-outline-secondary\">Add</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default WithService(ItemAddForm);","import LoadingIndicator from './loading-indicator.js';\r\n\r\nexport default LoadingIndicator;","import React\r\n//, {useState} \r\nfrom \"react\";\r\nimport './loading-indicator.css';\r\n\r\nconst LoadingIndicator = () => {\r\n\r\n    /*const [ progress, setProgress ] = useState(0);\r\n    \r\n    setTimeout( () => setProgress(100), 700);\r\n\r\n    const style = {\r\n        width: progress + '%'\r\n    }\r\n    return (\r\n        <div className=\"progress\">\r\n            <div className=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"60\" aria-valuemin=\"0\" aria-valuemax=\"100\" style={style} />\r\n        </div>\r\n    ) */\r\n    return <div>Loading ...</div>\r\n}\r\n\r\nexport default LoadingIndicator;","import ErrorIndicator from './error-indicator.js';\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\n\r\nconst ErrorIndicator = () => {\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"alert alert-danger\">Something went wrong.</div>\r\n            <button className=\"btn\"><a href=\"\\\">To home page</a></button>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\n\r\nimport './footer.css';\r\n\r\nexport const Footer:React.FC = () => {\r\n\r\nreturn <div className=\"footer\">All right reserved.</div>;\r\n}","import React, { Component } from \"react\";\r\nimport {bindActionCreators, compose} from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport store from \"../../store.js\";\r\n\r\nimport AppHeader from '../app-header';\r\nimport TodoList from '../todo-list';\r\nimport SearchPanel from '../search-panel';\r\nimport ItemStatusFilter from '../item-status-filter';\r\nimport ItemAddForm from '../item-add-form';\r\nimport LoadingIndicator from '../loading-indicator';\r\nimport WithService from '../hoc/with-service';\r\nimport ErrorIndicator from '../error-indicator';\r\nimport { Footer } from \"../footer/footer.tsx\";\r\nimport * as actions from '../../actions';\r\n\r\nimport './app.css';\r\n\r\nclass App extends Component {\r\n\r\n  onItemAdded = (label) => {\r\n    const item = this.createItem(label);\r\n    this.props.addItem(item) ;\r\n  };\r\n\r\n  createItem(label) {\r\n    return {\r\n      id: new Date().toISOString(),\r\n      label,\r\n      important: false,\r\n      done: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.fetchItems();\r\n  } \r\n\r\n  componentDidUpdate({items: prevItems}) {\r\n    console.log(prevItems);\r\n    if (this.props.items.length > 0 || prevItems.length > 0) this.props.service.postItems(store.getState().items);\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const { items, filter, loading, hasError, setFilter, setSearch } = this.props;\r\n    const doneCount = items.filter((item) => item.done).length;\r\n    const toDoCount = items.length - doneCount;\r\n    \r\n\r\n    if (loading) return <LoadingIndicator/>;\r\n    if (hasError) return <ErrorIndicator />;\r\n\r\n    return (\r\n      <div className=\"todo-app\"> \r\n        <AppHeader toDo={toDoCount} done={doneCount}/>\r\n\r\n        <div className=\"search-panel d-flex\">\r\n          <SearchPanel\r\n            onSearchChange={setSearch}/>\r\n\r\n          <ItemStatusFilter\r\n            filter={filter}\r\n            onFilterChange={setFilter} />\r\n        </div>\r\n      \r\n        <TodoList />\r\n\r\n        <ItemAddForm\r\n          onItemAdded={this.onItemAdded} />\r\n        \r\n        <Footer/>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state) => state;\r\n\r\nconst mapDispatchToProps = (dispatch, {service}) => {\r\n  return {\r\n    ...bindActionCreators({...actions, fetchItems: actions.fetchItems(service)}, dispatch)\r\n  }\r\n};\r\n\r\nexport default  compose(WithService, connect(mapStateToProps, mapDispatchToProps))(App);","import App from './app';\r\n\r\nexport default App;\r\n","import { ErrorBoundry } from './error-boundry.js';\r\n\r\nexport default ErrorBoundry;\r\n\r\n","import React, { Component } from \"react\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nexport class ErrorBoundry extends Component {\r\n\r\n    state = {\r\n        error: false\r\n    };\r\n\r\n    componentDidCatch(error, info) {\r\n        console.log(`${error} happend. Info: ${info}`);\r\n        this.setState( { error: true} );\r\n    }\r\n\r\n    render() {\r\n        const component = this.state.error ? <ErrorIndicator /> : this.props.children;\r\n        return component;\r\n    }\r\n}","import mockService from './mock-service.js';\r\n\r\nexport default mockService;","class service {\r\n    constructor() {\r\n        this._id = 10;\r\n        if (!localStorage.getItem('todos')) localStorage.setItem('todos', JSON.stringify([]));\r\n        \r\n/*        [\r\n            { id: 1, label: 'Drink Coffee', important: false, done: false },\r\n            { id: 2, label: 'Learn React', important: true, done: false },\r\n            { id: 3, label: 'Make Awesome App', important: false, done: false }\r\n        ];*/\r\n\r\n    }\r\n\r\n    _createItem = (label) => {\r\n        return {\r\n          id: this.maxId++,\r\n          label,\r\n          important: false,\r\n          done: false\r\n        };\r\n      }\r\n\r\n    getItems() {\r\n        return new Promise((res, rej) => {\r\n            setTimeout(\r\n                () => {\r\n                    if (Math.random() > 1) rej(new Error(\"Error on server\"))\r\n                    else {\r\n                        console.log(JSON.parse(localStorage.getItem('todos')));\r\n                        res(JSON.parse(localStorage.getItem('todos')));\r\n                    }\r\n                }\r\n                , 700);\r\n        });\r\n    }\r\n\r\n\r\n    postItems(items) {\r\n        console.log(\"Items saved.\", items);\r\n        localStorage.setItem('todos', JSON.stringify(items));\r\n    }\r\n\r\n}\r\n\r\nexport default new service();","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\n\r\nimport {Provider} from \"react-redux\";\r\nimport store from './store.js';\r\n\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport service from './services';\r\nimport {ServiceProvider} from './components/service-context';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <ServiceProvider value={service}>\r\n        <App />\r\n      </ServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>\r\n, document.getElementById('root'));\r\n"],"sourceRoot":""}