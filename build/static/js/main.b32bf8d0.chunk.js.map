{"version":3,"sources":["reducers/items-reducer.js","reducers/filter-reducer.js","reducers/search-reducer.js","reducers/loading-reducer.js","reducers/has-error-reducer.js","reducers/reducer.js","reducers/index.js","store.js","components/app-header/index.js","components/app-header/app-header.js","actions/index.js","components/todo-list-item/static-label-item.js","components/todo-list-item/changing-label-item.js","components/todo-list-item/todo-list-item.js","components/todo-list/index.js","components/todo-list/todo-list.js","components/search-panel/index.js","components/search-panel/search-panel.js","components/item-status-filter/item-status-filter.js","components/item-status-filter/index.js","components/service-context/service-context.js","components/hoc/with-service/index.js","components/hoc/with-service/with-service.js","components/item-add-form/index.js","components/item-add-form/item-add-form.js","components/loading-indicator/index.js","components/loading-indicator/loading-indicator.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/app/app.js","components/app/index.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/index.js","services/mock-service.js","index.js"],"names":["itemsReducer","action","items","type","payload","arr","id","newArr","idx","findIndex","item","splice","onDelete","newLabel","label","slice","changeLabel","toggleProperty","propName","value","filterReducer","filter","searchReducer","search","loadingReducer","loading","hasErrorReducer","hasError","reducer","state","console","log","store","createStore","applyMiddleware","thunk","AppHeader","toDo","done","className","fetchItemsRequest","fetchItemsSuccess","fetchItemsFailure","deleteItem","addItem","setFilter","setSearch","toggleDone","toggleImportant","fetchItems","service","dispatch","getItems","then","catch","err","StaticLabelItem","important","changeItem","classNames","onClick","aria-hidden","ChangingLabelItem","useState","labelValue","setLabelValue","inputElem","useRef","useEffect","current","focus","select","onSubmit","event","preventDefault","ref","onChange","target","TodoListItem","props","changingLabel","setChangingLabel","oldValue","TodoList","connect","bindActionCreators","actions","elements","map","key","SearchPanel","term","onTermChange","e","onSearchChange","setState","placeholder","this","Component","filterButtons","name","ItemStatusFilter","onFilterChange","buttons","React","createContext","ServiceProvider","Provider","ServiceConsumer","Consumer","WithService","Wrapped","ItemAddForm","onLabelChange","onItemAdded","LoadingIndicator","ErrorIndicator","Fragment","href","App","createItem","Date","toISOString","length","toLowerCase","indexOf","postItems","getState","doneCount","toDoCount","visibleItems","searchItems","filterItems","compose","ErrorBoundry","error","info","children","mockService","_createItem","maxId","_id","_items","Promise","res","rej","setTimeout","Math","random","Error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b32bf8d0.chunk.js","sourcesContent":["export default function itemsReducer ({items=[]}, action) {\r\n    switch (action.type) {\r\n\r\n        case \"FETCH_ITEMS_REQUEST\": {\r\n            return [];\r\n        }\r\n\r\n        case \"FETCH_ITEMS_SUCCESS\": {\r\n            return action.payload;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_FAILURE\": {\r\n            return [];\r\n        }\r\n\r\n        case \"DELETE_ITEM\": {\r\n            return onDelete(items, action.payload);\r\n        }\r\n\r\n        case \"ADD_ITEM\": {\r\n            return [...items, action.payload];\r\n        }\r\n\r\n        case \"CHANGE_LABEL\": {\r\n            const {id, newLabel} = action.payload;\r\n            return changeLabel(items, id, newLabel);\r\n        }\r\n\r\n        case \"TOGGLE_DONE\": {\r\n            return toggleProperty(items, action.payload, 'done');\r\n        }\r\n\r\n        case \"TOGGLE_IMPORTANT\": {\r\n            return toggleProperty(items, action.payload, 'important');\r\n        }\r\n\r\n        default: {\r\n            return items;\r\n        }\r\n    }\r\n}\r\n\r\nfunction toggleProperty (arr, id, propName) {\r\n    const idx = arr.findIndex((item) => item.id === id);\r\n    const oldItem = arr[idx];\r\n    const value = !oldItem[propName];\r\n    //копируем элементы, чтоб не мутировать состояние\r\n    const item = { ...arr[idx], [propName]: value } ;\r\n    //slice, чтоб не мутировать состояние\r\n    return [\r\n      ...arr.slice(0, idx),\r\n      item,\r\n      ...arr.slice(idx + 1)\r\n    ];\r\n};\r\n\r\nfunction changeLabel(arr, id, newLabel) {\r\n    const idx = arr.findIndex((item) => item.id === id);\r\n    //копируем элементы, чтоб не мутировать состояние\r\n    const item = { ...arr[idx], label: newLabel } ;\r\n    //slice, чтоб не мутировать состояние\r\n    return [\r\n      ...arr.slice(0, idx),\r\n      item,\r\n      ...arr.slice(idx + 1)\r\n    ];\r\n}\r\n\r\nfunction onDelete (arr, id) {\r\n    //копируем элементы, чтоб не мутировать состояние\r\n    const newArr = [...arr];\r\n    const idx = newArr.findIndex((item) => item.id === id);\r\n    newArr.splice(idx, 1);\r\n    return newArr;\r\n};","export default function filterReducer ({filter='all'}, action) {\r\n    switch (action.type) {\r\n        case \"SET_FILTER\": {\r\n            return action.payload;\r\n        }\r\n\r\n        default: {\r\n            return filter;\r\n        }\r\n    }\r\n}","export default function searchReducer ({search = ''}, action) {\r\n    switch (action.type) {\r\n        case \"SET_SEARCH\": {\r\n            return action.payload;\r\n        }\r\n\r\n        default: {\r\n            return search;\r\n        }\r\n    }\r\n};","export default function loadingReducer ({loading = false}, action) {\r\n    switch (action.type) {\r\n        case \"FETCH_ITEMS_REQUEST\": {\r\n            return true;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_SUCCESS\": {\r\n            return false;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_FAILURE\": {\r\n            return false;\r\n        }\r\n\r\n\r\n        default: {\r\n            return loading;\r\n        }\r\n    }\r\n}","export default function hasErrorReducer ({hasError = false}, action) {\r\n    switch (action.type) {\r\n        case \"FETCH_ITEMS_REQUEST\": {\r\n            return false;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_SUCCESS\": {\r\n            return false;\r\n        }\r\n\r\n        case \"FETCH_ITEMS_FAILURE\": {\r\n            return true;\r\n        }\r\n\r\n\r\n        default: {\r\n            return hasError;\r\n        }\r\n    }\r\n}","import itemsReducer from \"./items-reducer.js\";\r\nimport filterReducer from \"./filter-reducer.js\";\r\nimport searchReducer from \"./search-reducer.js\";\r\nimport loadingReducer from \"./loading-reducer.js\";\r\nimport hasErrorReducer from \"./has-error-reducer.js\";\r\n\r\nconst reducer = (state = {}, action) => {\r\n    console.log(action.type);\r\n    return {\r\n        items: itemsReducer(state, action),\r\n        filter: filterReducer(state, action),\r\n        search: searchReducer(state, action),\r\n        loading: loadingReducer(state, action),\r\n        hasError: hasErrorReducer(state, action)\r\n    }\r\n};\r\n\r\n\r\nexport default reducer;","import reducer from \"./reducer.js\";\r\n\r\nexport default reducer;","import {createStore, applyMiddleware} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport reducer from \"./reducers\";\r\n\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk));\r\n\r\nexport default store;","import AppHeader from './app-header';\r\n\r\nexport default AppHeader;\r\n","import React from 'react';\r\nimport './app-header.css';\r\n\r\nconst AppHeader = ({toDo, done}) => {\r\n  return (\r\n    <div className=\"app-header d-flex\">\r\n      <h1>Todo List</h1>\r\n      <h2>{toDo} more to do, {done} done</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppHeader;\r\n","const fetchItemsRequest = () => ({ type: \"FETCH_ITEMS_REQUEST\"});\r\n\r\nconst fetchItemsSuccess = (items) => ({ type: \"FETCH_ITEMS_SUCCESS\", payload: items});\r\n\r\nconst fetchItemsFailure = () => ({ type: \"FETCH_ITEMS_FAILURE\"});\r\n\r\nconst deleteItem = (id) => ({ type: \"DELETE_ITEM\", payload: id});\r\n\r\nconst addItem = (item) => ({ type: \"ADD_ITEM\", payload: item});\r\n\r\nconst setFilter = (filter) => ({ type: \"SET_FILTER\", payload: filter });\r\n\r\nconst setSearch = (search) => ({ type: \"SET_SEARCH\", payload: search });\r\n\r\nconst toggleDone = (id) => ({ type: \"TOGGLE_DONE\", payload: id });\r\n\r\nconst toggleImportant = (id) => ({ type: \"TOGGLE_IMPORTANT\", payload: id});\r\n\r\nconst changeLabel = (id, newLabel) => ({type: \"CHANGE_LABEL\", payload: {id: id, newLabel: newLabel} });\r\n\r\nconst fetchItems = (service) => () => (dispatch) => {\r\n    dispatch( fetchItemsRequest() );\r\n    service.getItems()\r\n        .then((items) => dispatch( fetchItemsSuccess(items) ))\r\n        .catch((err) => dispatch(fetchItemsFailure() ))\r\n};\r\n\r\nexport {\r\n    fetchItemsRequest, fetchItemsSuccess, fetchItemsFailure, fetchItems, deleteItem, addItem,\r\n    setFilter, setSearch, toggleDone, toggleImportant, changeLabel\r\n};","import React from \"react\";\r\n\r\n\r\nexport default function StaticLabelItem ({ important, done,\r\n    label, toggleImportant, onDelete, toggleDone, changeItem }) {\r\n\r\n    let classNames = 'todo-list-item';\r\n    if (important) {\r\n      classNames += ' important';\r\n    }\r\n  \r\n    if (done) {\r\n      classNames += ' done';\r\n    }\r\n\r\n    return (\r\n        <span className={classNames}>\r\n            <span\r\n                className=\"todo-list-item-label\"\r\n                onClick={toggleDone}>{label}</span>\r\n\r\n            <button type=\"button\"\r\n                    className=\"btn btn-outline-success btn-sm float-right\"\r\n                    onClick={toggleImportant}>\r\n                <i className=\"fa fa-exclamation\"></i>\r\n            </button>\r\n\r\n            <button type=\"button\"\r\n                    className=\"btn btn-outline-danger btn-sm float-right\"\r\n                    onClick={onDelete}>\r\n                <i className=\"fa fa-trash-o\"></i>\r\n            </button>\r\n\r\n            <button type=\"button\"\r\n                    className=\"btn btn-outline-primary btn-sm float-right\"\r\n                    onClick={changeItem}>\r\n                <i className=\"fa fa-pencil\" aria-hidden=\"true\"></i>\r\n            </button>\r\n        </span>\r\n    )\r\n};","import React, {useState, useEffect, useRef} from \"react\";\r\n\r\nexport default function ChangingLabelItem ({id, label, changeLabel, changeItem}) {\r\n\r\n    let [labelValue, setLabelValue] = useState(label);\r\n    const inputElem = useRef(null);\r\n\r\n    useEffect(() => {\r\n        inputElem.current.focus();\r\n        inputElem.current.select();\r\n    }, []);\r\n\r\n    const onLabelChange = (event) => {\r\n        let newLabel = event.target.value;\r\n        setLabelValue(newLabel);\r\n    };\r\n\r\n    const onSubmit = (event) => {\r\n        event.preventDefault();\r\n        changeLabel(id, labelValue);\r\n        changeItem();\r\n    } \r\n\r\n    return (\r\n        <form className=\"bottom-panel d-flex label-change-form\"\r\n                onSubmit={onSubmit}>\r\n            <input value={labelValue} ref={inputElem}\r\n                    className=\"form-control label-change-input\"\r\n                    onChange={onLabelChange}/>\r\n            <button type=\"submit\"\r\n                        className=\"btn btn-outline-secondary label-change-submit\">Save</button>\r\n        </form>\r\n    );\r\n\r\n};","import React, { useState } from 'react';\r\nimport StaticItem from \"./static-label-item.js\";\r\nimport ChangingLabelItem from \"./changing-label-item.js\";\r\n\r\nimport './todo-list-item.css';\r\n\r\nconst TodoListItem = (props) => {\r\n\r\n  let [changingLabel, setChangingLabel] = useState(false);\r\n  \r\n\r\n  const changeItem = () => {\r\n    console.log(\"change label\");\r\n    setChangingLabel((oldValue) => !oldValue );\r\n  };\r\n\r\n\r\n  let todoItem = changingLabel ? <ChangingLabelItem {...props} changeItem={changeItem}/> : <StaticItem {...props} changeItem={changeItem}/>;\r\n\r\n  return (\r\n    todoItem\r\n  )\r\n};\r\n\r\nexport default TodoListItem;\r\n","import TodoList from './todo-list';\r\n\r\nexport default TodoList;\r\n","import React from 'react';\r\nimport {bindActionCreators} from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from '../../actions';\r\n\r\nimport TodoListItem from '../todo-list-item/todo-list-item';\r\n\r\nimport './todo-list.css';\r\n\r\nconst TodoList = ({ items, toggleImportant, toggleDone, onDelete, changeLabel }) => {\r\n\r\n  const elements = items.map((item) => {\r\n    const {id} = item;\r\n    return (\r\n      <li key={id} className=\"list-group-item\">\r\n        <TodoListItem\r\n          { ...item }\r\n          toggleImportant={ () => toggleImportant(id) }\r\n          onDelete={ () => onDelete(id) } \r\n          toggleDone = {() => toggleDone(id)} \r\n          changeLabel = {changeLabel} />\r\n      </li>\r\n    );\r\n  });\r\n\r\n  return (<ul className=\"todo-list list-group\">{ elements }</ul>);\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => bindActionCreators({\r\n    toggleDone: actions.toggleDone,\r\n    toggleImportant: actions.toggleImportant,\r\n    onDelete: actions.deleteItem,\r\n    changeLabel: actions.changeLabel\r\n  }, dispatch);\r\n\r\nexport default connect(() => ({}), mapDispatchToProps)(TodoList);\r\n","import SearchPanel from './search-panel';\r\n\r\nexport default SearchPanel;\r\n","import React, { Component } from 'react';\r\n\r\nimport './search-panel.css';\r\n\r\nexport default class SearchPanel extends Component {\r\n\r\n  state = {\r\n    term: ''\r\n  };\r\n\r\n  onTermChange = (e) => {\r\n    const {onSearchChange = () => {}} = this.props;\r\n    this.setState({\r\n      term: e.target.value\r\n    });\r\n\r\n    onSearchChange(e.target.value);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <input type=\"text\"\r\n             className=\"form-control search-input\"\r\n             placeholder=\"type to search\"\r\n             value={this.state.term}\r\n             onChange={ this.onTermChange } />\r\n    );\r\n  };\r\n}\r\n","import React from 'react';\r\n\r\nconst filterButtons = [\r\n  { name: 'all', label: 'All' },\r\n  { name: 'active', label: 'Active' },\r\n  { name: 'done', label: 'Done' }\r\n];\r\n\r\nconst ItemStatusFilter = ({filter, onFilterChange}) => {\r\n\r\n  const buttons = filterButtons.map(({name, label}) => {\r\n    const isActive = name === filter;\r\n    const classNames = 'btn ' + (isActive ? 'btn-info' : 'btn-outline-secondary');\r\n\r\n    return (\r\n      <button key={name}\r\n              type=\"button\"\r\n              onClick={() => onFilterChange(name)}\r\n              className={classNames}>{label}</button>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"btn-group\">\r\n      { buttons }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemStatusFilter;\r\n","import ItemStatusFilter from './item-status-filter';\r\n\r\nexport default ItemStatusFilter;\r\n","import React from \"react\";\r\n\r\nconst {\r\n    Provider : ServiceProvider,\r\n    Consumer : ServiceConsumer\r\n  } = React.createContext();\r\n\r\nexport {\r\n    ServiceProvider,\r\n    ServiceConsumer\r\n}; ","import WithService from './with-service.js';\r\n\r\nexport default WithService;","import React from 'react';\r\nimport {ServiceConsumer} from '../../service-context';\r\n\r\nconst WithService = (Wrapped) => {\r\n\r\n    return (props) => {\r\n        return (<ServiceConsumer>\r\n            {\r\n                (service) => { return (<Wrapped {...props} service={service} />);}\r\n            }\r\n        </ServiceConsumer>);\r\n    }\r\n};\r\n\r\nexport default WithService;","import ItemAddForm from './item-add-form';\r\n\r\nexport default ItemAddForm;\r\n","import React, { Component } from 'react';\r\nimport WithService from '../hoc/with-service';\r\n\r\nimport './item-add-form.css';\r\n\r\nclass ItemAddForm extends Component {\r\n\r\n  state = {\r\n    label: ''\r\n  };\r\n\r\n  onLabelChange = (e) => {\r\n    this.setState({\r\n      label: e.target.value\r\n    })\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { label } = this.state;\r\n    this.setState({ label: '' });\r\n    \r\n    this.props.onItemAdded(label);\r\n    this.props.service.addItem(label);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"bottom-panel d-flex\"\r\n        onSubmit={this.onSubmit}>\r\n\r\n        <input type=\"text\"\r\n               className=\"form-control new-todo-label\"\r\n               value={this.state.label}\r\n               onChange={this.onLabelChange}\r\n               placeholder=\"What needs to be done?\" />\r\n        <button type=\"submit\"\r\n                className=\"btn btn-outline-secondary\">Add</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default WithService(ItemAddForm);","import LoadingIndicator from './loading-indicator.js';\r\n\r\nexport default LoadingIndicator;","import React\r\n//, {useState} \r\nfrom \"react\";\r\nimport './loading-indicator.css';\r\n\r\nconst LoadingIndicator = () => {\r\n\r\n    /*const [ progress, setProgress ] = useState(0);\r\n    \r\n    setTimeout( () => setProgress(100), 700);\r\n\r\n    const style = {\r\n        width: progress + '%'\r\n    }\r\n    return (\r\n        <div className=\"progress\">\r\n            <div className=\"progress-bar\" role=\"progressbar\" aria-valuenow=\"60\" aria-valuemin=\"0\" aria-valuemax=\"100\" style={style} />\r\n        </div>\r\n    ) */\r\n    return <div>Loading ...</div>\r\n}\r\n\r\nexport default LoadingIndicator;","import ErrorIndicator from './error-indicator.js';\r\n\r\nexport default ErrorIndicator;","import React from \"react\";\r\n\r\nconst ErrorIndicator = () => {\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"alert alert-danger\">Something went wrong.</div>\r\n            <button className=\"btn\"><a href=\"localhost\">To home page</a></button>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default ErrorIndicator;","import React, { Component } from \"react\";\r\nimport {bindActionCreators, compose} from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport store from \"../../store.js\";\r\n\r\nimport AppHeader from '../app-header';\r\nimport TodoList from '../todo-list';\r\nimport SearchPanel from '../search-panel';\r\nimport ItemStatusFilter from '../item-status-filter';\r\nimport ItemAddForm from '../item-add-form';\r\nimport LoadingIndicator from '../loading-indicator';\r\nimport WithService from '../hoc/with-service';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nimport * as actions from '../../actions';\r\n\r\nimport './app.css';\r\n\r\n\r\nclass App extends Component {\r\n\r\n  onItemAdded = (label) => {\r\n    const item = this.createItem(label);\r\n    this.props.addItem(item) ;\r\n  };\r\n\r\n  createItem(label) {\r\n    return {\r\n      id: new Date().toISOString(),\r\n      label,\r\n      important: false,\r\n      done: false\r\n    };\r\n  }\r\n\r\n  filterItems(items, filter) {\r\n    if (filter === 'all') {\r\n      return items;\r\n    } else if (filter === 'active') {\r\n      return items.filter((item) => (!item.done));\r\n    } else if (filter === 'done') {\r\n      return items.filter((item) => item.done);\r\n    }\r\n  }\r\n\r\n  searchItems(items, search='') {\r\n    if (search.length === 0) {\r\n      return items;\r\n    }\r\n\r\n    return items.filter((item) => {\r\n      return item.label.toLowerCase().indexOf(search.toLowerCase()) > -1;\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.fetchItems();\r\n  } \r\n\r\n  componentDidUpdate() {\r\n    this.props.service.postItems(store.getState().items);\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const { items, filter, search, loading, hasError, setFilter, setSearch } = this.props;\r\n    const doneCount = items.filter((item) => item.done).length;\r\n    const toDoCount = items.length - doneCount;\r\n    const visibleItems = this.searchItems(this.filterItems(items, filter), search); \r\n\r\n    //закомментил загрузку чтоб не мешала\r\n    if (loading) return <LoadingIndicator/>;\r\n    if (hasError) return <ErrorIndicator />;\r\n\r\n    return (\r\n      <div className=\"todo-app\"> \r\n        <AppHeader toDo={toDoCount} done={doneCount}/>\r\n\r\n        <div className=\"search-panel d-flex\">\r\n          <SearchPanel\r\n            onSearchChange={setSearch}/>\r\n\r\n          <ItemStatusFilter\r\n            filter={filter}\r\n            onFilterChange={setFilter} />\r\n        </div>\r\n      \r\n        <TodoList\r\n          items={ visibleItems }/>\r\n\r\n        <ItemAddForm\r\n          onItemAdded={this.onItemAdded} />\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state) => state;\r\n\r\nconst mapDispatchToProps = (dispatch, {service}) => {\r\n  ///const { fetchItemsRequest, fetchItemsSuccess, fetchItemsFailure} = actions;\r\n  return {\r\n    ...bindActionCreators({...actions, fetchItems: actions.fetchItems(service)}, dispatch)\r\n  }\r\n};\r\n\r\nexport default  compose(WithService, connect(mapStateToProps, mapDispatchToProps))(App);","import App from './app';\r\n\r\nexport default App;\r\n","import { ErrorBoundry } from './error-boundry.js';\r\n\r\nexport default ErrorBoundry;\r\n\r\n","import React, { Component } from \"react\";\r\nimport ErrorIndicator from \"../error-indicator\";\r\n\r\nexport class ErrorBoundry extends Component {\r\n\r\n    state = {\r\n        error: false\r\n    };\r\n\r\n    componentDidCatch(error, info) {\r\n        console.log(`${error} happend. Info: ${info}`);\r\n        this.setState( { error: true} );\r\n    }\r\n\r\n    render() {\r\n        const component = this.state.error ? <ErrorIndicator /> : this.props.children;\r\n        return component;\r\n    }\r\n}","import mockService from './mock-service.js';\r\n\r\nexport default mockService;","class service {\r\n    constructor() {\r\n        this._id = 10;\r\n        this._items = [\r\n            { id: 1, label: 'Drink Coffee', important: false, done: false },\r\n            { id: 2, label: 'Learn React', important: true, done: false },\r\n            { id: 3, label: 'Make Awesome App', important: false, done: false }\r\n        ];\r\n\r\n    }\r\n\r\n    _createItem = (label) => {\r\n        return {\r\n          id: this.maxId++,\r\n          label,\r\n          important: false,\r\n          done: false\r\n        };\r\n      }\r\n\r\n    getItems() {\r\n        return new Promise((res, rej) => {\r\n            setTimeout(\r\n                () => {\r\n                    if (Math.random() > 0.8) rej(new Error(\"Error on server\"))\r\n                    else res(this._items);\r\n                }\r\n                , 700);\r\n        });\r\n    }\r\n\r\n    addItem(label) {\r\n        console.log('Item added: ', label);\r\n    }\r\n\r\n    postItems(items) {\r\n        console.log(\"Items on server: \",items);\r\n    }\r\n\r\n}\r\n\r\nexport default new service();","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\n\r\nimport {Provider} from \"react-redux\";\r\nimport store from './store.js';\r\n\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport service from './services';\r\nimport {ServiceProvider} from './components/service-context';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <ServiceProvider value={service}>\r\n        <App />\r\n      </ServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>\r\n, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}